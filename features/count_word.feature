Feature:
  In order to count the word occurrences in different stream
  As as console user
  I need a command that consume a source text stream and return a list odored by count and occurrence name

  @word_counter @internal_file @small
  Scenario: retrieve word occurrences from an internal file source
    Given there is a "small_text.txt" in my system
    When the "php" command "/../../bin/count_word.php --source=resources/small_text.txt"
    Then the result would be equal to:
    """
    page=1
    semi=1
    protected=1
    wolfgang=2
    amadeus=2
    mozart=7
    from=4
    wikipedia=1
    the=3
    free=1
    encyclopedia=1
    redirects=1
    here=1
    for=1
    other=1
    uses=1
    see=2
    disambiguation=1
    c=1
    1780=1
    detail=1
    portrait=1
    by=1
    johann=1
    nepomuk=1
    della=1
    croce=1
    german=1
    v=1
    lf=1
    a=2
    ama=1
    de=1
    s=1
    mo=1
    tsa=1
    t=1
    english=1
    fn=1
    1=1
    27=1
    january=1
    1756=1
    5=1
    december=1
    1791=1
    baptised=1
    as=1
    johannes=1
    chrysostomus=1
    wolfgangus=1
    theophilus=1
    2=1
    was=1
    prolific=1
    and=3
    influential=1
    composer=1
    of=2
    classical=1
    era=1
    born=1
    in=1
    salzburg=1
    showed=1
    prodigious=1
    ability=1
    his=1
    earliest=1
    childhood=1
    already=1
    competent=1
    on=1
    keyboard=1
    violin=1
    he=1
    composed=1
    age=1
    five=1
    performed=1
    before=1
    european=1
    royalty=1
    """

  @word_counter @wikipedia_page @small
  Scenario: retrieve word occurrences from Wikipedia raw API
    When the "php" command "/../../bin/count_word.php --source='https://en.wikipedia.org/w/index.php?title=Adalbert&action=raw'"
    Then the result would be equal to:
    """
    infobox=1
    given=6
    name2=1
    name=6
    adalbert=38
    image=2
    size=1
    caption=1
    pronunciation=1
    gender=1
    male=1
    meaning=2
    noble=4
    bright=3
    language=2
    german=14
    languages=1
    see=2
    also=2
    albert=3
    adalberht=1
    adalbrecht=1
    albrecht=1
    is=1
    a=1
    which=1
    means=1
    or=2
    shining=2
    derived=1
    from=1
    the=2
    words=1
    adal=1
    and=4
    berht=1
    alternative=1
    spellings=1
    include=2
    adelbart=1
    adalberto=1
    related=1
    names=2
    elbert=1
    may=1
    refer=1
    to=1
    mystic=1
    8th=1
    century=1
    begas=1
    1836=1
    1888=1
    painter=1
    czerny=1
    1863=1
    1941=1
    austrian=3
    pediatrician=1
    de=1
    u=1
    1909=1
    1937=2
    romanian=1
    football=2
    player=2
    falk=1
    1827=1
    1900=1
    politician=2
    gyrowetz=1
    1763=1
    1850=1
    bohemian=2
    composer=1
    kraus=1
    born=2
    singer=1
    kr=1
    ger=1
    1832=1
    1896=1
    astronomer=1
    pilch=1
    1917=1
    2004=1
    artist=1
    schnee=1
    1913=1
    1982=1
    naval=1
    officer=1
    schnizlein=1
    1814=1
    1868=2
    botanist=1
    stifter=1
    1805=1
    writer=1
    von=2
    blanc=1
    1907=1
    1976=1
    admiral=1
    ladenberg=1
    1798=1
    1855=1
    prussian=1
    zafirov=1
    1969=1
    bulgarian=1
    royal=1
    religious=1
    leaders=1
    duke=2
    of=24
    alsace=1
    died=3
    723=1
    lorraine=1
    1000=2
    1048=1
    margrave=4
    austria=1
    985=1
    1055=1
    i=1
    tuscany=2
    820=1
    886=1
    ii=2
    count=1
    ballenstedt=1
    1030=1
    1083=1
    875=1
    915=1
    iii=1
    bohemia=1
    1145=1
    1200=1
    archbishop=5
    salzburg=1
    prince=3
    bavaria=2
    1828=2
    1875=2
    egmond=1
    710=1
    northumbrian=1
    missionary=2
    hamburg=2
    1072=1
    italy=1
    936=1
    971=1
    ivrea=1
    magdeburg=2
    910=1
    981=1
    mainz=3
    1137=1
    pomerania=1
    1124=1
    1162=1
    pomeranian=1
    bishop=1
    prague=1
    956=1
    997=1
    prussia=1
    1811=1
    1873=1
    saxony=1
    1467=1
    1484=1
    surname=1
    max=1
    1874=1
    1933=1
    actor=1
    adelbert=1
    saint=1
    type=1
    both=1
    category=1
    masculine=1
    """

  @word_counter @stdin @nightly
  Scenario: retrieve word occurrences from stdin
    When value "/fixtures/small_text.txt" is piped "php" command "/../../bin/count_word.php"
    Then the result would be equal to:
    """
    page=1
    semi=1
    protected=1
    wolfgang=2
    amadeus=2
    mozart=7
    from=4
    wikipedia=1
    the=3
    free=1
    encyclopedia=1
    redirects=1
    here=1
    for=1
    other=1
    uses=1
    see=2
    disambiguation=1
    c=1
    1780=1
    detail=1
    portrait=1
    by=1
    johann=1
    nepomuk=1
    della=1
    croce=1
    german=1
    v=1
    lf=1
    a=2
    ama=1
    de=1
    s=1
    mo=1
    tsa=1
    t=1
    english=1
    fn=1
    1=1
    27=1
    january=1
    1756=1
    5=1
    december=1
    1791=1
    baptised=1
    as=1
    johannes=1
    chrysostomus=1
    wolfgangus=1
    theophilus=1
    2=1
    was=1
    prolific=1
    and=3
    influential=1
    composer=1
    of=2
    classical=1
    era=1
    born=1
    in=1
    salzburg=1
    showed=1
    prodigious=1
    ability=1
    his=1
    earliest=1
    childhood=1
    already=1
    competent=1
    on=1
    keyboard=1
    violin=1
    he=1
    composed=1
    age=1
    five=1
    performed=1
    before=1
    european=1
    royalty=1
    """
